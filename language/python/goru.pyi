from typing import Any, Coroutine

class FSEntry:
    name: str
    is_dir: bool
    size: int

class FSStatResult:
    name: str
    size: int
    is_dir: bool
    mod_time: int

# =============================================================================
# Core
# =============================================================================

def call(fn: str, **kwargs: Any) -> Any: ...
async def async_call(fn: str, **kwargs: Any) -> Any: ...
def run_async[T](coro: Coroutine[Any, Any, T]) -> T: ...
def install_pkg(name: str, version: str | None = None) -> dict[str, Any]: ...

# =============================================================================
# http
# =============================================================================

class HTTPResponse:
    status_code: int
    text: str
    headers: dict[str, str]
    @property
    def ok(self) -> bool: ...
    def json(self) -> Any: ...

class _HTTPModule:
    def request(self, method: str, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    def get(self, url: str, *, headers: dict[str, str] | None = None) -> HTTPResponse: ...
    def post(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    def put(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    def patch(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    def delete(self, url: str, *, headers: dict[str, str] | None = None) -> HTTPResponse: ...
    async def async_request(self, method: str, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    async def async_get(self, url: str, *, headers: dict[str, str] | None = None) -> HTTPResponse: ...
    async def async_post(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    async def async_put(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    async def async_patch(self, url: str, *, headers: dict[str, str] | None = None, body: str | None = None) -> HTTPResponse: ...
    async def async_delete(self, url: str, *, headers: dict[str, str] | None = None) -> HTTPResponse: ...

http: _HTTPModule

# =============================================================================
# fs
# =============================================================================

class _FSModule:
    def read_text(self, path: str) -> str: ...
    def read_json(self, path: str) -> Any: ...
    def write_text(self, path: str, content: str) -> str: ...
    def write_json(self, path: str, data: Any, *, indent: int | None = None) -> str: ...
    def listdir(self, path: str) -> list[FSEntry]: ...
    def exists(self, path: str) -> bool: ...
    def mkdir(self, path: str) -> str: ...
    def remove(self, path: str) -> str: ...
    def stat(self, path: str) -> FSStatResult: ...
    async def async_read_text(self, path: str) -> str: ...
    async def async_read_json(self, path: str) -> Any: ...
    async def async_write_text(self, path: str, content: str) -> str: ...
    async def async_listdir(self, path: str) -> list[FSEntry]: ...
    async def async_exists(self, path: str) -> bool: ...
    async def async_mkdir(self, path: str) -> str: ...
    async def async_remove(self, path: str) -> str: ...
    async def async_stat(self, path: str) -> FSStatResult: ...

fs: _FSModule

# =============================================================================
# time
# =============================================================================

def time_now() -> float: ...
